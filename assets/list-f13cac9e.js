import{w as Te,Z as re,b as ne,c as Oe,d as Pe,T as $,e as le,i as Se,f as E,s as Q,h as Y,j as q,N as pe,u as L,k as Z,l as De,m as Ie,o as N,D as ke,g as Ce,n as ze}from"./index-a6111c5d.js";import{x as n,n as l,e as w,h as V,q as M,j as P,l as h,m as R,k as d,z as je,A as Le,v as ce,i as Me}from"./vendor-c17b9770.js";const Ue=e=>{const{id:t,tokenURI:s}=e,[a,i]=t?t.toString().split("-"):[e.contract.id,e.tokenID];return{address:a,tokenID:i,ctime:e.createdAt*1e3,tokenURI:s}},Be=e=>{const t=Ue(e),{owner:{id:s="",doids:a=[]}={}}=e;return Object.assign(t,{owner:s,doids:a.map(i=>({...i,name:Te(i.name)}))})},Ot=async e=>{const t=e.toLowerCase();let s=0,a=0;if(e!=re){const i=await ne("scan",`{
        doids(where:{address:"${t}"}){address {id totalTokensMinted totalTokenHolders}}
      }`),{address:{totalTokenHolders:o="",totalTokensMinted:r=""}={}}=i.doids[0]||{};s=o,a=r}return{ownerNum:s,mintNum:a}},de=async(e,t={pageSize:5,page:1})=>{let{minter:s,doid:a,tokenID:i}=e;if(!s||s==re)return[];s=s.toLowerCase();const{tokens:o=[]}=await ne("scan",`{tokens(${Oe(t)} where:{${Pe({minter:s,tokenID:i})}} orderBy:createdAt orderDirection:desc){
        id tokenURI createdAt owner { id doids { name }
      }}}`)||{};return o.map(r=>Object.assign(Be(r),{minter:s,doid:a}))},Pt=async e=>(await de(e))[0];var Ae=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,he=(e,t,s,a)=>{for(var i=a>1?void 0:a?Ne(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&Ae(t,s,i),i};let H=class extends $(""){constructor(){super(...arguments),this.type="inline"}render(){switch(this.type){case"block":return n`<div class="block mx-auto my-8 text-center text-xl"><i class="mdi mdi-loading mx-1"></i></div>`;default:return n`<i class="mdi mdi-loading mr-1"></i> Loading...`}}};he([l({type:String})],H.prototype,"type",2);H=he([w("loading-icon")],H);const F=(e,{persistent:t=!1,rootMargin:s="0px"}={})=>class extends e{constructor(){super(...arguments),this.onObserved=()=>{},this.unobserve=()=>{var a;return this.observe$&&((a=this.observer)==null?void 0:a.unobserve(this.observe$))},this.observe=()=>{this.observer||(this.observe$||(this.observe$=this.$(":first-child")))&&(this.observer=new IntersectionObserver(a=>{a[0].intersectionRatio<=0||(this.onObserved(),t||this.unobserve())},{rootMargin:s}),this.observer.observe(this.observe$))}}firstUpdated(){this.observe()}connectedCallback(){this.unobserve(),super.connectedCallback()}};var g=(e=>(e.audio="audio",e.image="image",e.threed="threed",e.video="video",e))(g||{});const G=[{ext:"gif",mediaType:"image",mimeType:"image/gif"},{ext:"jpg",mediaType:"image",mimeType:"image/jpeg"},{ext:"jpeg",mediaType:"image",mimeType:"image/jpeg"},{ext:"png",mediaType:"image",mimeType:"image/png"},{ext:"svg",mediaType:"image",mimeType:"image/svg+xml"},{ext:"webp",mediaType:"image",mimeType:"image/webp"}];G.map(e=>e.ext);G.map(e=>e.mimeType);const K=[{ext:"mp4",mediaType:"video",mimeType:"video/mp4"},{ext:"webm",mediaType:"video",mimeType:"video/webm"}];K.map(e=>e.ext);K.map(e=>e.mimeType);const J=[{ext:"gltf",mediaType:"threed",mimeType:"model/gltf-binary"},{ext:"glb",mediaType:"threed",mimeType:"model/gltf-binary"}];J.map(e=>e.ext);J.map(e=>e.mimeType);const X=[{ext:"mp3",mediaType:"audio",mimeType:"audio/mpeg"},{ext:"ogg",mediaType:"audio",mimeType:"audio/ogg"},{ext:"wav",mediaType:"audio",mimeType:"audio/wav"}];X.map(e=>e.ext);X.map(e=>e.mimeType);const me=[...G,...K,...X,...J],Re=(e="")=>{const t=le(e);return t?Ee(t,"ext"):ue(Se(e))},ue=e=>{var t;return(t=me.find(s=>s.mimeType===e))==null?void 0:t.mediaType},Ee=(e,t)=>{var s;return(s=me.find(a=>a[t]===e))==null?void 0:s.mediaType},ge=async e=>{const{headers:t}=await fetch(e,{method:"HEAD"}),s=t.get("content-type");if(s)return ue(s)},qe=async e=>{let t;return le(e)&&(t=Re(e)),t||(t=await ge(e)),t},U=async e=>{var T;const{background_color:t,owner:s="",external_link:a="",asset_contract:i,collection:o={}}=e,r=e.name||o.name,v=e.poster||e.image_preview_url||e.image_thumbnail_url||e.image_url||e.image||e.image_original_url||o.image_url||"",c=E(e.raw||e.animation_url||e.animation_original_url||o.large_image_url||v);return{name:r,description:e.description||o.description,image:E(v),raw:c,creator:((T=e.creator)==null?void 0:T.address)||e.creator,owner:s,external_link:e.external_link||e.external_uri,background_color:t,mediaType:c?await ge(c):""}},B={store:sessionStorage,withoutEnv:!0,ttl:864e5},D={},I=async(e,t,s=1024)=>{let a={};if(D[e])return await Q(50),await I(e,t);D[e]=Y();try{a=await q.get(t),setTimeout(()=>{D[e]=0},Math.max(Y()-D[e],s))}catch(i){if(i.code===403)throw i;D[e]=0}return a},W="bGarR-34AQNx20ZlWah4RPwq7MQ3_Okl",ye={alchemy:{api:{"0x1":`https://eth-mainnet.g.alchemy.com/nft/v3/${W}`,"0x5":`https://eth-goerli.g.alchemy.com/nft/v3/${W}`}},opensea:{url:{"0x1":"https://opensea.io/assets/ethereum","0xaa36a7":"https://testnets.opensea.io/assets/sepolia","0x5":"https://testnets.opensea.io/assets/goerli"},api:{"0x1":"https://api.opensea.io/api/v1/asset","0xaa36a7":"https://testnets-api.opensea.io/api/v1/asset","0x5":"https://testnets-api.opensea.io/api/v1/asset"}}},St=e=>ye[e].url[pe.chainId],fe=e=>ye[e].api[pe.chainId],He=async(e={},t=!0)=>{const{address:s="",tokenID:a=""}=e;let i;const o=await L(`meta.${s}.${a}`,B);return i=await o.get(),i!=null&&i.image||(i=await ve(e,t)),i!=null&&i.image||(i=await $e(e,t)),i.name&&i.image&&o.set(i),i};let ee=sessionStorage.getItem("alchemyIsUnavailable");const ve=async({address:e="",tokenID:t=""}={},s=!0)=>{let a={};if(ee)return a;try{const i=`${fe("alchemy")}/getNFTMetadata?contractAddress=${e}&tokenId=${t}`,o=await I("alchemy",i),{name:r,description:v,raw:c,contract:{openSeaMetadata:p={}}}=o;a=await U({...p,name:r,description:v,poster:o.image.thumbnailUrl,raw:c.metadata.image,creator:c.metadata.artist,owner:""}),a.image||(await I("alchemy",`${i}&refreshCache=true`),s&&(await Q(1e4),a=await ve({address:e,tokenID:t},!1)))}catch(i){i.code===403&&sessionStorage.setItem("alchemyIsUnavailable",ee="1")}return a};let te=sessionStorage.getItem("openseaIsUnavailable");const $e=async({address:e="",tokenID:t=""}={},s=!0)=>{let a={};if(te)return a;try{const i=`${fe("opensea")}/${e}/${t}/`;a=await U(await I("opensea",i)),a.image||(await I("opensea",`${i}?force_update=true`),s&&(await Q(1e4),a=await $e({address:e,tokenID:t},!1)))}catch(i){i.code===403&&sessionStorage.setItem("openseaIsUnavailable",te="1")}return a},ie=async(e="")=>{let t;if(!e)return{};Z(e)&&(t=await U(await q.get(e)));const s=await L(`meta.${e}`,B);if(t||(t=await s.get()),!t)try{t=await U(await q.get(E(e))),t.name&&t.image&&s.set(t)}catch(a){}return t!=null?t:{}},Qe=async e=>{let t;const{tokenURI:s,address:a,tokenID:i}=e;return Z(s)&&(t=await ie(s)),!t&&s&&(t=await(await L(`meta.${s}`,B)).get()),t||(t=await(await L(`meta.${a}.${i}`,B)).get()),!t&&a&&i&&(t=await He(e)),!t&&s&&(t=await ie(s)),t&&(e.meta=t,De(e)),t!=null?t:{}},Ze=async(e,{maxW:t=400}={})=>new Promise(s=>{if(!e)return s("");const a=sessionStorage.getItem(`blob.${e}`);if(a)return s(a);const i=new Image;i.src=e,i.crossOrigin="anonymous",i.onload=async()=>{let[c,p]=[i.width,i.height],[T,z,xe,_e]=[0,0,c,p];c>t&&(p=t*(p/c),c=t),p>t&&(c=t*(c/p),p=t),i.height/i.width,o.width=c,o.height=p,r.drawImage(i,T,z,xe,_e,0,0,c,p),v()};const o=document.createElement("canvas"),r=o.getContext("2d"),v=()=>{o.toBlob(c=>{const p=URL.createObjectURL(c);sessionStorage.setItem(`blob.${e}`,p),s(p)},"image/png",1)}}),Ve=`i{position:relative;display:inline-flex;height:100%;width:100%;align-items:center;justify-content:center;overflow:hidden}i.empty,i.err,i:not(.loaded){background:linear-gradient(-45deg,rgba(238,201,121) 8%,rgb(187,131,68) 36%,rgba(238,201,121) 66%) 0% 0% / 2400px;animation:silk 4s linear infinite}i.err img{visibility:hidden}i img{height:auto;max-height:100%;width:auto;max-width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:contain;object-fit:contain}@keyframes silk{0%{background-position:-2400px 0}to{background-position:2400px 0}}
`;var Fe=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,u=(e,t,s,a)=>{for(var i=a>1?void 0:a?Ge(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&Fe(t,s,i),i};const Ke=[48,64,128,256,384,512,640,750,828,1080,1200,1920,2048,3840];let m=class extends F($(Ve)){constructor(){super(...arguments),this.el$=V(),this.loaded=!1,this.stop=!1,this.loading="eager",this.sizes=void 0,this.w="100%",this.firstLoaded=this.loaded,this.imgLoaded=this.loaded,this.err=!1,this.show=!1,this.blobSrc="",this.onLoad=()=>{this.emit("loaded",this.imgLoaded=this.firstLoaded=!0)},this.onError=()=>{this.err=!1},this.onObserved=()=>{var e,t;this.w=((t=(e=this.el$.value)==null?void 0:e.getBoundingClientRect().width)!=null?t:"400")+"",this.show=!0}}get lazy(){return this.loading==="lazy"}get isInstantSrc(){return Z(this.src)}get isResizableSrc(){return this.src&&/\?(w|width)=/.test(this.src)}get requireComporess(){return!this.isResizableSrc&&!this.isInstantSrc&&!this.blobSrc}get uri(){if(!(this.err||!this.show))return this.requireComporess?this.blobSrc:this.src}get empty(){return!(this.src||this.blobSrc)||!(this.uri||this.uriset)}get uriset(){if(!this.src||this.err||!this.show||!this.isResizableSrc)return;const{origin:e,pathname:t}=new URL(this.src);return Ke.map(s=>`${[e+t]}?auto=format&w=${s}&width=${s} ${s}w`).join(",")}get autoSizes(){return this.sizes?this.sizes:`(max-width: 768px) ${this.w}px, ${this.w}px`}shouldUpdate(e){return e.has("src")&&this.requireComporess&&this.src&&Ze(this.src).then(t=>this.blobSrc=t),!0}connectedCallback(){super.connectedCallback(),this.loading==="eager"&&this.onObserved()}render(){return n`<i ${M(this.el$)} class="${P({loaded:this.firstLoaded,err:this.err,empty:this.empty,stop:this.stop})}">${h(this.isResizableSrc?this.uriset:this.uri,()=>n`<img class="${P({invisible:!this.firstLoaded,"opacity-0":!this.firstLoaded})}" src="${R(this.uri)}" srcset="${R(this.uriset)}" sizes="${R(this.autoSizes)}" @load="${this.onLoad}" @error="${this.onError}">`)}</i>`}};u([l({type:String,attribute:!0})],m.prototype,"src",2);u([l({type:Boolean})],m.prototype,"loaded",2);u([l({type:Boolean})],m.prototype,"stop",2);u([l({type:String})],m.prototype,"loading",2);u([l({type:String})],m.prototype,"sizes",2);u([d()],m.prototype,"w",2);u([d()],m.prototype,"firstLoaded",2);u([d()],m.prototype,"imgLoaded",2);u([d()],m.prototype,"err",2);u([d()],m.prototype,"show",2);u([d()],m.prototype,"blobSrc",2);m=u([w("img-loader")],m);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const we=Symbol.for(""),Je=e=>{if((e==null?void 0:e.r)===we)return e==null?void 0:e._$litStatic$},Xe=e=>({_$litStatic$:e,r:we}),se=new Map,Ye=e=>(t,...s)=>{const a=s.length;let i,o;const r=[],v=[];let c,p=0,T=!1;for(;p<a;){for(c=t[p];p<a&&(o=s[p],(i=Je(o))!==void 0);)c+=i+t[++p],T=!0;p!==a&&v.push(o),r.push(c),p++}if(p===a&&r.push(t[a]),T){const z=r.join("$$lit$$");(t=se.get(z))===void 0&&(r.raw=r,se.set(z,t=r)),s=v}return e(t,...s)},We=Ye(je);var et=Object.defineProperty,tt=Object.getOwnPropertyDescriptor,j=(e,t,s,a)=>{for(var i=a>1?void 0:a?tt(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&et(t,s,i),i};const be=(e,{tag:t="video"}={})=>{class s extends e{constructor(){super(...arguments),this.el$=V(),this.autoplay=!1,this.playing=!1,this.tag=Xe(t),this.played=!1,this.oncontextmenu=i=>{i.preventDefault(),i.stopImmediatePropagation()},this.onplay=i=>{},this.play=async()=>{var i,o;await 0,this.played=!0,(o=(i=this.el$)==null?void 0:i.value)==null||o.play(),this.emit("play")},this.stop=()=>{var i,o;(o=(i=this.el$)==null?void 0:i.value)==null||o.pause(),this.emit("stop")},this._autoplay=()=>{this.played||!this.autoplay||(this.el$.value&&(this.el$.value.muted=!Ie.interacted),this.play())}}render(){return We`<${this.tag}
        ${M(this.el$)}
        class="w-full h-full"
        src=${this.src}
        @error=${this.stop}
        @contextmenu=${this.oncontextmenu}
        ?autoplay=${this.autoplay}
        ?controls=${this.autoplay}
        ?poster=${this.poster}
        loop
        webkit-playsinline
        playsinline
        controlslist="nodownload"
        preload="metadata"
        disablepictureinpicture
        @canplay=${this._autoplay}
      ></${this.tag}>`}}return j([l({type:String})],s.prototype,"poster",2),j([l({type:String})],s.prototype,"src",2),j([l({type:Boolean})],s.prototype,"autoplay",2),j([d()],s.prototype,"playing",2),s};var it=Object.defineProperty,st=Object.getOwnPropertyDescriptor,at=(e,t,s,a)=>{for(var i=a>1?void 0:a?st(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&it(t,s,i),i};let ae=class extends be($("")){};ae=at([w("dui-video")],ae);var ot=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,nt=(e,t,s,a)=>{for(var i=a>1?void 0:a?rt(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&ot(t,s,i),i};let oe=class extends be($(""),{tag:"audio"}){};oe=nt([w("dui-audio")],oe);const lt=`.play-btn{cursor:pointer;--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity));background:rgba(159,159,159,.4);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.play-btn svg{height:100%;width:100%}.play-btn svg path{transform-origin:center;transition:all .35s cubic-bezier(.4,0,.2,1)}
`;var pt=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,O=(e,t,s,a)=>{for(var i=a>1?void 0:a?ct(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&pt(t,s,i),i};let _=class extends $(lt){constructor(){super(...arguments),this.player$=V(),this.class="",this.autoplay=!1,this.playing=!1,this.elId=Math.random().toString(),this.updateMediaType=async()=>{var e,t;!this.mediaType&&this.raw&&(this.mediaType=(t=(e=this.meta)==null?void 0:e.mediaType)!=null?t:await qe(this.raw))},this.play=async()=>{var e,t;N.emit("media-play",this.elId),this.playing=!0,await 0,(t=(e=this.player$)==null?void 0:e.value)==null||t.play()},this.stop=e=>{var t,s;e!=null&&e.detail&&(e==null?void 0:e.detail)===this.elId||(this.playing=!1,(s=(t=this.player$)==null?void 0:t.value)==null||s.stop())},this.toggle=async()=>{this[this.playing?"stop":"play"]()}}get poster(){var e;return((e=this.meta)==null?void 0:e.image)||this.src}get raw(){var e;return((e=this.meta)==null?void 0:e.raw)||this.src}get showPoster(){return!this.autoplay&&(this.mediaType!==g.video||!this.playing)||[g.image,g.audio].includes(this.mediaType)}get showPlayBtn(){return!this.autoplay&&[g.video,g.audio].includes(this.mediaType)}get showRawInPlace(){return(this.autoplay||this.playing)&&[g.video,g.audio,g.threed].includes(this.mediaType)}get zoomAble(){return[g.image].includes(this.mediaType)}shouldUpdate(e){return(e.has("meta")||e.has("src"))&&this.updateMediaType(),!0}connectedCallback(){super.connectedCallback(),this.updateMediaType(),N.on("media-play",this.stop)}disconnectedCallback(){super.disconnectedCallback(),N.off("media-play",this.stop)}render(){return n`<div class="media-player w-full h-full mx-auto relative select-none ${P(this.$c([this.class]))}">${h(this.showPoster,()=>n`<img-loader class="poster w-full h-full" src="${this.poster}" loading="lazy"></img-loader>`)} ${h(this.showRawInPlace,()=>n`${Le(this.mediaType,[["audio",()=>n`<dui-audio ${M(this.player$)} src="${this.raw}" ?autoplay="${this.autoplay}"></dui-audio>`],["threed",()=>n``],["video",()=>n`<dui-video ${M(this.player$)} src="${this.raw}" ?autoplay="${this.autoplay}"></dui-video>`]])}`)}<div class="top-0 left-0 absolute w-full h-full ${P({"cursor-pointer":!this.showPlayBtn&&!1})}" @click="${this.toggle}">${h(this.showPlayBtn,()=>n`<div class="play-btn flex justify-center items-center w-8 h-8 right-2 bottom-2 absolute z-10 bg-black text-2xl rounded-full"><svg viewBox="0 0 36 36"><path fill="#fff" d="${this.playing?"M12,26 16,26 16,10 12,10zM21,26 25,26 25,10 21,10z":"M13.75,26 20.25,22 20.25,14 13.75,10zM20.25,22 25,18 25,18 20.25,14z"}"></path></svg></div>`)}</div>${h(this.zoomAble,()=>n``)}</div>`}};O([l({type:String})],_.prototype,"class",2);O([l({type:Object})],_.prototype,"meta",2);O([l({type:String})],_.prototype,"src",2);O([l({type:Boolean})],_.prototype,"autoplay",2);O([d()],_.prototype,"playing",2);O([d()],_.prototype,"mediaType",2);_=O([w("dui-media-player")],_);const dt=`.skeleton{display:inline-flex;height:100%;width:100%;flex-direction:column;gap:1rem}.p{height:100%;width:6rem;overflow:hidden;border-radius:.375rem;height:1em;background:rgba(222,226,230)}.p:after{content:"";display:block;height:100%;width:100%;background:linear-gradient(90deg,rgba(255,255,255,0) 8%,rgba(255,255,255,.8) 36%,rgba(255,255,255,0) 66%) 0% 0% / 1200px;animation:skeleton 3s ease-in-out infinite}.p:nth-child(2){width:9rem}.p:nth-child(3){width:12rem}@keyframes skeleton{0%{background-position:-1200px 0}to{background-position:1200px 0}}
`;var ht=Object.defineProperty,mt=Object.getOwnPropertyDescriptor,A=(e,t,s,a)=>{for(var i=a>1?void 0:a?mt(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&ht(t,s,i),i};let k=class extends $(dt){constructor(){super(...arguments),this.expect=!1,this.num=1,this.class=""}get groups(){return new Array(this.num)}render(){return this.expect?n`<slot></slot>`:n`<div class="skeleton ${P(this.$c([this.class]))}">${ce(this.groups,()=>n`<div class="p"></div>`)}</div>`}};A([l({type:Boolean})],k.prototype,"expect",2);A([l({type:Number})],k.prototype,"num",2);A([l({type:String})],k.prototype,"class",2);k=A([w("loading-skeleton")],k);const ut=`.item{min-height:11rem}
`;var gt=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,C=(e,t,s,a)=>{for(var i=a>1?void 0:a?yt(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&gt(t,s,i),i};let S=class extends F($(ut)){constructor(){super(...arguments),this.item={},this.cook=async()=>{this.meta=await Qe(this.item),this.cooked=await ke({DOIDName:this.doid,token:this.token})},this.onObserved=()=>{this.cook()},this.goto=()=>{this.cookedUri&&Ce(`/collection/${this.cookedUri}`)}}get doid(){var e;return(e=this.DOID)==null?void 0:e.doid}get createTime(){return this.item.ctime?new Date(this.item.ctime).toLocaleString():""}get token(){var t;const{tokenID:e}=this.item;return{name:(t=this.meta)==null?void 0:t.name,tokenID:e}}get cookedName(){var e,t;return(t=(e=this.cooked)==null?void 0:e.parsed)==null?void 0:t.val}get cookedUri(){var e,t;return(t=(e=this.cooked)==null?void 0:e.parsed)==null?void 0:t.uri}get tokenName(){var e,t;return(t=(e=this.cooked)==null?void 0:e.parsed)==null?void 0:t.val}connectedCallback(){super.connectedCallback()}render(){var e,t,s,a,i;return n`<div class="item p-4"><div class="font-medium"><loading-skeleton .expect="${(e=this.meta)==null?void 0:e.name}"><dui-link class="uri" href="${`/collection/${this.cookedUri}`}">${this.cookedUri}</dui-link></loading-skeleton></div><div class="flex gap-4 py-4"><div class="shrink-0 w-24 h-24"><dui-media-player .meta="${this.meta}"></dui-media-player></div><div><loading-skeleton .expect="${(t=this.meta)==null?void 0:t.name}" num="3"><div class="mb-2 flex items-center"><dui-link class="text-base" href="${`/collection/${this.cookedUri}`}">${(s=this.meta)==null?void 0:s.name}<i class="mdi mdi-ethereum ml-1"></i></dui-link></div><p class="break-words break-all text-xs lg_text-sm text-gray-500">${(a=this.meta)==null?void 0:a.description}</p></loading-skeleton></div></div><div class="text-xs">Minted on ${this.createTime}, Owned by ${h((i=this.item.doids)==null?void 0:i.length,()=>{var o,r;return n`${(r=(o=this.item.doids)==null?void 0:o.at(0))==null?void 0:r.name}`},()=>n`<dui-address .address="${this.item.owner}"></dui-address>`)}</div></div>`}};C([l()],S.prototype,"DOID",2);C([l()],S.prototype,"item",2);C([d()],S.prototype,"cooked",2);C([d()],S.prototype,"meta",2);S=C([w("doid-coll-item")],S);const ft=`:host::part(inner){display:flex;height:2rem;width:100%;align-items:center;justify-content:center}@media (min-width: 1024px){:host::part(inner){height:2.5rem}}
`;var vt=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,b=(e,t,s,a)=>{for(var i=a>1?void 0:a?$t(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&vt(t,s,i),i};let y=class extends F($(ft),{persistent:!0,rootMargin:"30px"}){constructor(){super(...arguments),this.pageSize=5,this.page=1,this.mode="scroll",this.pending=!1,this.firstLoad=!0,this.empty=!1,this.nomore=!1,this.class="",this.onObserved=()=>{this.scrollMode&&this.loadmore()}}get canLoad(){return!this.pending&&!this.nomore&&!this.empty&&!this.firstLoad}get scrollMode(){return this.mode==="scroll"}loadmore(){if(!this.canLoad)return;const{pageSize:e,page:t,mode:s}=this;this.emit("loadmore",{pageSize:e,page:t,mode:s})}connectedCallback(){super.connectedCallback()}render(){return n`<div class="dui-pagination w-full flex justify-center items-center mt-4 ${P(this.$c([{nomore:this.nomore,"pointer-events-none":!this.canLoad},this.class]))}"><div part="inner" @click="${this.loadmore}">${h(this.empty,()=>n`<slot name="empty"></slot>`,()=>n`${h(this.nomore,()=>n`<slot name="nomore"></slot>`,()=>n`${h(this.pending,()=>n`<slot name="loading"><loading-icon type="block"></loading-icon></slot>`,()=>n`${h(!this.scrollMode&&!this.firstLoad,()=>n`<slot><dui-link>Load more</dui-link></slot>`)}`)}`)}`)}</div></div>`}};b([l({type:Number})],y.prototype,"pageSize",2);b([l({type:Number})],y.prototype,"page",2);b([l()],y.prototype,"mode",2);b([l()],y.prototype,"pending",2);b([l({type:Boolean})],y.prototype,"firstLoad",2);b([l({type:Boolean})],y.prototype,"empty",2);b([l({type:Boolean})],y.prototype,"nomore",2);b([l()],y.prototype,"class",2);y=b([w("dui-pagination")],y);const wt="";var bt=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,x=(e,t,s,a)=>{for(var i=a>1?void 0:a?xt(t,s):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(a?r(t,s,i):r(i))||i);return a&&i&&bt(t,s,i),i};let f=class extends $(wt){constructor(){super(...arguments),this.pending=!1,this.err="",this.ts=0,this.collections=[],this.nomore=!1,this.page=1,this.pageSize=5,this.loadmore=()=>{this.page++,this.getCollections()}}get doid(){var e;return(e=this.DOID)==null?void 0:e.doid}get empty(){return!this.err&&!!this.doid&&!!this.ts&&!this.collections.length}get pagination(){return{page:this.page,pageSize:this.pageSize}}async getCollections(){if(this.pending)return;const{owner:e=""}=await ze(this.doid);if(e){this.pending=!0,this.err="";try{const t=await de({minter:e,doid:this.doid},this.pagination);this.collections.push(...t),this.nomore=t.length<this.pageSize}catch(t){this.err=t.message||t}finally{this.ts++,this.pending=!1}}}connectedCallback(){super.connectedCallback(),this.getCollections()}render(){return n`<div class="doid-collections">${h(this.err,()=>n`${this.err}`)} ${h(this.collections.length,()=>n`<div class="grid gap-4">${ce(this.collections,e=>n`${Me(e,n`<div class="bg-gray-100 break-words break-all rounded-md"><doid-coll-item .DOID="${this.DOID}" .item="${e}"></doid-coll-item></div>`)}`)}</div>`)} ${h(!this.err,()=>n`<dui-pagination .pending="${this.pending}" .nomore="${this.nomore}" .firstLoad="${!this.ts}" .empty="${this.empty}" .pageSize="${this.pageSize}" .page="${this.page}" @loadmore="${this.loadmore}"><span slot="empty">No collection yet.</span></dui-pagination>`)}</div>`}};x([l()],f.prototype,"DOID",2);x([d()],f.prototype,"pending",2);x([d()],f.prototype,"err",2);x([d()],f.prototype,"ts",2);x([d()],f.prototype,"collections",2);x([d()],f.prototype,"nomore",2);x([d()],f.prototype,"page",2);x([d()],f.prototype,"pageSize",2);f=x([w("doid-collections")],f);export{St as a,Pt as b,Qe as g,Ot as q};
