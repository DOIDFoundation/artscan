System.register(["./index-legacy-0b0e4c4d.js","./vendor-legacy-8274d652.js"],(function(e,t){"use strict";var i,s,o,a,r,n,d,l,p,c,h,m,g,u,y,b,w,v,$,f,k,x,T,O,S,I,D,j,z,P,L,_,C,M;return{setters:[e=>{i=e.w,s=e.Z,o=e.b,a=e.c,r=e.d,n=e.T,d=e.e,l=e.i,p=e.f,c=e.s,h=e.h,m=e.j,g=e.N,u=e.u,y=e.k,b=e.l,w=e.m,v=e.o,$=e.D,f=e.g,k=e.n},e=>{x=e.x,T=e.n,O=e.e,S=e.h,I=e.q,D=e.j,j=e.l,z=e.m,P=e.k,L=e.z,_=e.A,C=e.v,M=e.i}],execute:function(){e("q",(async e=>{const t=e.toLowerCase();let i=0,a=0;if(e!=s){const e=await o("scan",`{\n        doids(where:{address:"${t}"}){address {id totalTokensMinted totalTokenHolders}}\n      }`),{address:{totalTokenHolders:s="",totalTokensMinted:r=""}={}}=e.doids[0]||{};i=s,a=r}return{ownerNum:i,mintNum:a}}));const t=async(e,t={pageSize:5,page:1})=>{let{minter:n,doid:d,tokenID:l}=e;if(!n||n==s)return[];n=n.toLowerCase();const{tokens:p=[]}=await o("scan",`{tokens(${a(t)} where:{${r({minter:n,tokenID:l})}} orderBy:createdAt orderDirection:desc){\n        id tokenURI createdAt owner { id doids { name }\n      }}}`)||{};return p.map((e=>Object.assign((e=>{const t=(e=>{const{id:t,tokenURI:i}=e,[s,o]=t?t.toString().split("-"):[e.contract.id,e.tokenID];return{address:s,tokenID:o,ctime:1e3*e.createdAt,tokenURI:i}})(e),{owner:{id:s="",doids:o=[]}={}}=e;return Object.assign(t,{owner:s,doids:o.map((e=>({...e,name:i(e.name)})))})})(e),{minter:n,doid:d})))};e("b",(async e=>(await t(e))[0]));var U=Object.defineProperty,R=Object.getOwnPropertyDescriptor,B=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?R(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&U(t,i,a),a};let N=class extends(n("")){constructor(){super(...arguments),this.type="inline"}render(){return"block"===this.type?x`<div class="block mx-auto my-8 text-center text-xl"><i class="mdi mdi-loading mx-1"></i></div>`:x`<i class="mdi mdi-loading mr-1"></i> Loading...`}};B([T({type:String})],N.prototype,"type",2),N=B([O("loading-icon")],N);const A=(e,{persistent:t=!1,rootMargin:i="0px"}={})=>class extends e{constructor(){super(...arguments),this.onObserved=()=>{},this.unobserve=()=>this.observe$&&this.observer?.unobserve(this.observe$),this.observe=()=>{this.observer||(this.observe$||(this.observe$=this.$(":first-child")))&&(this.observer=new IntersectionObserver((e=>{e[0].intersectionRatio<=0||(this.onObserved(),t||this.unobserve())}),{rootMargin:i}),this.observer.observe(this.observe$))}}firstUpdated(){this.observe()}connectedCallback(){this.unobserve(),super.connectedCallback()}};var q=(e=>(e.audio="audio",e.image="image",e.threed="threed",e.video="video",e))(q||{});const E=[{ext:"gif",mediaType:"image",mimeType:"image/gif"},{ext:"jpg",mediaType:"image",mimeType:"image/jpeg"},{ext:"jpeg",mediaType:"image",mimeType:"image/jpeg"},{ext:"png",mediaType:"image",mimeType:"image/png"},{ext:"svg",mediaType:"image",mimeType:"image/svg+xml"},{ext:"webp",mediaType:"image",mimeType:"image/webp"}];E.map((e=>e.ext)),E.map((e=>e.mimeType));const H=[{ext:"mp4",mediaType:"video",mimeType:"video/mp4"},{ext:"webm",mediaType:"video",mimeType:"video/webm"}];H.map((e=>e.ext)),H.map((e=>e.mimeType));const Q=[{ext:"gltf",mediaType:"threed",mimeType:"model/gltf-binary"},{ext:"glb",mediaType:"threed",mimeType:"model/gltf-binary"}];Q.map((e=>e.ext)),Q.map((e=>e.mimeType));const W=[{ext:"mp3",mediaType:"audio",mimeType:"audio/mpeg"},{ext:"ogg",mediaType:"audio",mimeType:"audio/ogg"},{ext:"wav",mediaType:"audio",mimeType:"audio/wav"}];W.map((e=>e.ext)),W.map((e=>e.mimeType));const Z=[...E,...H,...W,...Q],F=e=>Z.find((t=>t.mimeType===e))?.mediaType,G=(e,t)=>Z.find((i=>i[t]===e))?.mediaType,J=async e=>{const{headers:t}=await fetch(e,{method:"HEAD"}),i=t.get("content-type");if(i)return F(i)},K=async e=>{let t;return d(e)&&(t=((e="")=>{const t=d(e);return t?G(t,"ext"):F(l(e))})(e)),t||(t=await J(e)),t},V=async e=>{const{background_color:t,owner:i="",external_link:s="",asset_contract:o,collection:a={}}=e,r=e.name||a.name,n=e.poster||e.image_preview_url||e.image_thumbnail_url||e.image_url||e.image||e.image_original_url||a.image_url||"",d=p(e.raw||e.animation_url||e.animation_original_url||a.large_image_url||n);return{name:r,description:e.description||a.description,image:p(n),raw:d,creator:e.creator?.address||e.creator,owner:i,external_link:e.external_link||e.external_uri,background_color:t,mediaType:d?await J(d):""}},X={store:sessionStorage,withoutEnv:!0,ttl:864e5},Y={},ee=async(e,t,i=1024)=>{let s={};if(Y[e])return await c(50),await ee(e,t);Y[e]=h();try{s=await m.get(t),setTimeout((()=>{Y[e]=0}),Math.max(h()-Y[e],i))}catch(o){if(403===o.code)throw o;Y[e]=0}return s},te="bGarR-34AQNx20ZlWah4RPwq7MQ3_Okl",ie={alchemy:{api:{"0x1":`https://eth-mainnet.g.alchemy.com/nft/v3/${te}`,"0x5":`https://eth-goerli.g.alchemy.com/nft/v3/${te}`}},opensea:{url:{"0x1":"https://opensea.io/assets/ethereum","0xaa36a7":"https://testnets.opensea.io/assets/sepolia","0x5":"https://testnets.opensea.io/assets/goerli"},api:{"0x1":"https://api.opensea.io/api/v1/asset","0xaa36a7":"https://testnets-api.opensea.io/api/v1/asset","0x5":"https://testnets-api.opensea.io/api/v1/asset"}}},se=(e("a",(e=>ie[e].url[g.chainId])),e=>ie[e].api[g.chainId]);let oe=sessionStorage.getItem("alchemyIsUnavailable");const ae=async({address:e="",tokenID:t=""}={},i=!0)=>{let s={};if(oe)return s;try{const o=`${se("alchemy")}/getNFTMetadata?contractAddress=${e}&tokenId=${t}`,a=await ee("alchemy",o),{name:r,description:n,raw:d,contract:{openSeaMetadata:l={}}}=a;s=await V({...l,name:r,description:n,poster:a.image.thumbnailUrl,raw:d.metadata.image,creator:d.metadata.artist,owner:""}),s.image||(await ee("alchemy",`${o}&refreshCache=true`),i&&(await c(1e4),s=await ae({address:e,tokenID:t},!1)))}catch(o){403===o.code&&sessionStorage.setItem("alchemyIsUnavailable",oe="1")}return s};let re=sessionStorage.getItem("openseaIsUnavailable");const ne=async({address:e="",tokenID:t=""}={},i=!0)=>{let s={};if(re)return s;try{const o=`${se("opensea")}/${e}/${t}/`;s=await V(await ee("opensea",o)),s.image||(await ee("opensea",`${o}?force_update=true`),i&&(await c(1e4),s=await ne({address:e,tokenID:t},!1)))}catch(o){403===o.code&&sessionStorage.setItem("openseaIsUnavailable",re="1")}return s},de=async(e="")=>{let t;if(!e)return{};y(e)&&(t=await V(await m.get(e)));const i=await u(`meta.${e}`,X);if(t||(t=await i.get()),!t)try{t=await V(await m.get(p(e))),t.name&&t.image&&i.set(t)}catch{}return t??{}},le=e("g",(async e=>{let t;const{tokenURI:i,address:s,tokenID:o}=e;return y(i)&&(t=await de(i)),!t&&i&&(t=await(await u(`meta.${i}`,X)).get()),t||(t=await(await u(`meta.${s}.${o}`,X)).get()),!t&&s&&o&&(t=await(async(e={},t=!0)=>{const{address:i="",tokenID:s=""}=e;let o;const a=await u(`meta.${i}.${s}`,X);return o=await a.get(),o?.image||(o=await ae(e,t)),o?.image||(o=await ne(e,t)),o.name&&o.image&&a.set(o),o})(e)),!t&&i&&(t=await de(i)),t&&(e.meta=t,b(e)),t??{}}));var pe=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,he=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?ce(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&pe(t,i,a),a};const me=[48,64,128,256,384,512,640,750,828,1080,1200,1920,2048,3840];let ge=class extends(A(n("i{position:relative;display:inline-flex;height:100%;width:100%;align-items:center;justify-content:center;overflow:hidden}i.empty,i.err,i:not(.loaded){background:linear-gradient(-45deg,rgba(238,201,121) 8%,rgb(187,131,68) 36%,rgba(238,201,121) 66%) 0% 0% / 2400px;animation:silk 4s linear infinite}i.err img{visibility:hidden}i img{height:auto;max-height:100%;width:auto;max-width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:contain;object-fit:contain}@keyframes silk{0%{background-position:-2400px 0}to{background-position:2400px 0}}\n"))){constructor(){super(...arguments),this.el$=S(),this.loaded=!1,this.stop=!1,this.loading="eager",this.sizes=void 0,this.w="100%",this.firstLoaded=this.loaded,this.imgLoaded=this.loaded,this.err=!1,this.show=!1,this.blobSrc="",this.onLoad=()=>{this.emit("loaded",this.imgLoaded=this.firstLoaded=!0)},this.onError=()=>{this.err=!1},this.onObserved=()=>{this.w=(this.el$.value?.getBoundingClientRect().width??"400")+"",this.show=!0}}get lazy(){return"lazy"===this.loading}get isInstantSrc(){return y(this.src)}get isResizableSrc(){return this.src&&/\?(w|width)=/.test(this.src)}get requireComporess(){return!this.isResizableSrc&&!this.isInstantSrc&&!this.blobSrc}get uri(){if(!this.err&&this.show)return this.requireComporess?this.blobSrc:this.src}get empty(){return!(this.src||this.blobSrc)||!(this.uri||this.uriset)}get uriset(){if(!this.src||this.err||!this.show||!this.isResizableSrc)return;const{origin:e,pathname:t}=new URL(this.src);return me.map((i=>`${[e+t]}?auto=format&w=${i}&width=${i} ${i}w`)).join(",")}get autoSizes(){return this.sizes?this.sizes:`(max-width: 768px) ${this.w}px, ${this.w}px`}shouldUpdate(e){return e.has("src")&&this.requireComporess&&this.src&&(async(e,{maxW:t=400}={})=>new Promise((i=>{if(!e)return i("");const s=sessionStorage.getItem(`blob.${e}`);if(s)return i(s);const o=new Image;o.src=e,o.crossOrigin="anonymous",o.onload=async()=>{let[e,i]=[o.width,o.height],[s,d,l,p]=[0,0,e,i];e>t&&(i=t*(i/e),e=t),i>t&&(e=t*(e/i),i=t),o.height,o.width,a.width=e,a.height=i,r.drawImage(o,s,d,l,p,0,0,e,i),n()};const a=document.createElement("canvas"),r=a.getContext("2d"),n=()=>{a.toBlob((t=>{const s=URL.createObjectURL(t);sessionStorage.setItem(`blob.${e}`,s),i(s)}),"image/png",1)}})))(this.src).then((e=>this.blobSrc=e)),!0}connectedCallback(){super.connectedCallback(),"eager"===this.loading&&this.onObserved()}render(){return x`<i ${I(this.el$)} class="${D({loaded:this.firstLoaded,err:this.err,empty:this.empty,stop:this.stop})}">${j(this.isResizableSrc?this.uriset:this.uri,(()=>x`<img class="${D({invisible:!this.firstLoaded,"opacity-0":!this.firstLoaded})}" src="${z(this.uri)}" srcset="${z(this.uriset)}" sizes="${z(this.autoSizes)}" @load="${this.onLoad}" @error="${this.onError}">`))}</i>`}};he([T({type:String,attribute:!0})],ge.prototype,"src",2),he([T({type:Boolean})],ge.prototype,"loaded",2),he([T({type:Boolean})],ge.prototype,"stop",2),he([T({type:String})],ge.prototype,"loading",2),he([T({type:String})],ge.prototype,"sizes",2),he([P()],ge.prototype,"w",2),he([P()],ge.prototype,"firstLoaded",2),he([P()],ge.prototype,"imgLoaded",2),he([P()],ge.prototype,"err",2),he([P()],ge.prototype,"show",2),he([P()],ge.prototype,"blobSrc",2),ge=he([O("img-loader")],ge);
/**
       * @license
       * Copyright 2020 Google LLC
       * SPDX-License-Identifier: BSD-3-Clause
       */
const ue=Symbol.for(""),ye=e=>{if((null==e?void 0:e.r)===ue)return null==e?void 0:e._$litStatic$},be=new Map,we=(e=>(t,...i)=>{const s=i.length;let o,a;const r=[],n=[];let d,l=0,p=!1;for(;l<s;){for(d=t[l];l<s&&void 0!==(a=i[l],o=ye(a));)d+=o+t[++l],p=!0;l!==s&&n.push(a),r.push(d),l++}if(l===s&&r.push(t[s]),p){const e=r.join("$$lit$$");void 0===(t=be.get(e))&&(r.raw=r,be.set(e,t=r)),i=n}return e(t,...i)})(L);var ve=Object.defineProperty,$e=Object.getOwnPropertyDescriptor,fe=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?$e(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&ve(t,i,a),a};const ke=(e,{tag:t="video"}={})=>{class i extends e{constructor(){super(...arguments),this.el$=S(),this.autoplay=!1,this.playing=!1,this.tag=(e=>({_$litStatic$:e,r:ue}))(t),this.played=!1,this.oncontextmenu=e=>{e.preventDefault(),e.stopImmediatePropagation()},this.onplay=e=>{},this.play=async()=>{await 0,this.played=!0,this.el$?.value?.play(),this.emit("play")},this.stop=()=>{this.el$?.value?.pause(),this.emit("stop")},this._autoplay=()=>{!this.played&&this.autoplay&&(this.el$.value&&(this.el$.value.muted=!w.interacted),this.play())}}render(){return we`<${this.tag}
        ${I(this.el$)}
        class="w-full h-full"
        src=${this.src}
        @error=${this.stop}
        @contextmenu=${this.oncontextmenu}
        ?autoplay=${this.autoplay}
        ?controls=${this.autoplay}
        ?poster=${this.poster}
        loop
        webkit-playsinline
        playsinline
        controlslist="nodownload"
        preload="metadata"
        disablepictureinpicture
        @canplay=${this._autoplay}
      ></${this.tag}>`}}return fe([T({type:String})],i.prototype,"poster",2),fe([T({type:String})],i.prototype,"src",2),fe([T({type:Boolean})],i.prototype,"autoplay",2),fe([P()],i.prototype,"playing",2),i};var xe=Object.defineProperty,Te=Object.getOwnPropertyDescriptor;let Oe=class extends(ke(n(""))){};Oe=((e,t,i,s)=>{for(var o,a=s>1?void 0:s?Te(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&xe(t,i,a),a})([O("dui-video")],Oe);var Se=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor;let De=class extends(ke(n(""),{tag:"audio"})){};De=((e,t,i,s)=>{for(var o,a=s>1?void 0:s?Ie(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&Se(t,i,a),a})([O("dui-audio")],De);var je=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,Pe=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?ze(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&je(t,i,a),a};let Le=class extends(n(".play-btn{cursor:pointer;--tw-text-opacity: 1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity));background:rgba(159,159,159,.4);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.play-btn svg{height:100%;width:100%}.play-btn svg path{transform-origin:center;transition:all .35s cubic-bezier(.4,0,.2,1)}\n")){constructor(){super(...arguments),this.player$=S(),this.class="",this.autoplay=!1,this.playing=!1,this.elId=Math.random().toString(),this.updateMediaType=async()=>{!this.mediaType&&this.raw&&(this.mediaType=this.meta?.mediaType??await K(this.raw))},this.play=async()=>{v.emit("media-play",this.elId),this.playing=!0,await 0,this.player$?.value?.play()},this.stop=e=>{e?.detail&&e?.detail===this.elId||(this.playing=!1,this.player$?.value?.stop())},this.toggle=async()=>{this[this.playing?"stop":"play"]()}}get poster(){return this.meta?.image||this.src}get raw(){return this.meta?.raw||this.src}get showPoster(){return!this.autoplay&&(this.mediaType!==q.video||!this.playing)||[q.image,q.audio].includes(this.mediaType)}get showPlayBtn(){return!this.autoplay&&[q.video,q.audio].includes(this.mediaType)}get showRawInPlace(){return(this.autoplay||this.playing)&&[q.video,q.audio,q.threed].includes(this.mediaType)}get zoomAble(){return[q.image].includes(this.mediaType)}shouldUpdate(e){return(e.has("meta")||e.has("src"))&&this.updateMediaType(),!0}connectedCallback(){super.connectedCallback(),this.updateMediaType(),v.on("media-play",this.stop)}disconnectedCallback(){super.disconnectedCallback(),v.off("media-play",this.stop)}render(){return x`<div class="media-player w-full h-full mx-auto relative select-none ${D(this.$c([this.class]))}">${j(this.showPoster,(()=>x`<img-loader class="poster w-full h-full" src="${this.poster}" loading="lazy"></img-loader>`))} ${j(this.showRawInPlace,(()=>x`${_(this.mediaType,[["audio",()=>x`<dui-audio ${I(this.player$)} src="${this.raw}" ?autoplay="${this.autoplay}"></dui-audio>`],["threed",()=>x``],["video",()=>x`<dui-video ${I(this.player$)} src="${this.raw}" ?autoplay="${this.autoplay}"></dui-video>`]])}`))}<div class="top-0 left-0 absolute w-full h-full ${D({"cursor-pointer":!this.showPlayBtn&&!1})}" @click="${this.toggle}">${j(this.showPlayBtn,(()=>x`<div class="play-btn flex justify-center items-center w-8 h-8 right-2 bottom-2 absolute z-10 bg-black text-2xl rounded-full"><svg viewBox="0 0 36 36"><path fill="#fff" d="${this.playing?"M12,26 16,26 16,10 12,10zM21,26 25,26 25,10 21,10z":"M13.75,26 20.25,22 20.25,14 13.75,10zM20.25,22 25,18 25,18 20.25,14z"}"></path></svg></div>`))}</div>${j(this.zoomAble,(()=>x``))}</div>`}};Pe([T({type:String})],Le.prototype,"class",2),Pe([T({type:Object})],Le.prototype,"meta",2),Pe([T({type:String})],Le.prototype,"src",2),Pe([T({type:Boolean})],Le.prototype,"autoplay",2),Pe([P()],Le.prototype,"playing",2),Pe([P()],Le.prototype,"mediaType",2),Le=Pe([O("dui-media-player")],Le);var _e=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,Me=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?Ce(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&_e(t,i,a),a};let Ue=class extends(n('.skeleton{display:inline-flex;height:100%;width:100%;flex-direction:column;gap:1rem}.p{height:100%;width:6rem;overflow:hidden;border-radius:.375rem;height:1em;background:rgba(222,226,230)}.p:after{content:"";display:block;height:100%;width:100%;background:linear-gradient(90deg,rgba(255,255,255,0) 8%,rgba(255,255,255,.8) 36%,rgba(255,255,255,0) 66%) 0% 0% / 1200px;animation:skeleton 3s ease-in-out infinite}.p:nth-child(2){width:9rem}.p:nth-child(3){width:12rem}@keyframes skeleton{0%{background-position:-1200px 0}to{background-position:1200px 0}}\n')){constructor(){super(...arguments),this.expect=!1,this.num=1,this.class=""}get groups(){return new Array(this.num)}render(){return this.expect?x`<slot></slot>`:x`<div class="skeleton ${D(this.$c([this.class]))}">${C(this.groups,(()=>x`<div class="p"></div>`))}</div>`}};Me([T({type:Boolean})],Ue.prototype,"expect",2),Me([T({type:Number})],Ue.prototype,"num",2),Me([T({type:String})],Ue.prototype,"class",2),Ue=Me([O("loading-skeleton")],Ue);var Re=Object.defineProperty,Be=Object.getOwnPropertyDescriptor,Ne=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?Be(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&Re(t,i,a),a};let Ae=class extends(A(n(".item{min-height:11rem}\n"))){constructor(){super(...arguments),this.item={},this.cook=async()=>{this.meta=await le(this.item),this.cooked=await $({DOIDName:this.doid,token:this.token})},this.onObserved=()=>{this.cook()},this.goto=()=>{this.cookedUri&&f(`/collection/${this.cookedUri}`)}}get doid(){return this.DOID?.doid}get createTime(){return this.item.ctime?new Date(this.item.ctime).toLocaleString():""}get token(){const{tokenID:e}=this.item;return{name:this.meta?.name,tokenID:e}}get cookedName(){return this.cooked?.parsed?.val}get cookedUri(){return this.cooked?.parsed?.uri}get tokenName(){return this.cooked?.parsed?.val}connectedCallback(){super.connectedCallback()}render(){return x`<div class="item p-4"><div class="font-medium"><loading-skeleton .expect="${this.meta?.name}"><dui-link class="uri" href="${`/collection/${this.cookedUri}`}">${this.cookedUri}</dui-link></loading-skeleton></div><div class="flex gap-4 py-4"><div class="shrink-0 w-24 h-24"><dui-media-player .meta="${this.meta}"></dui-media-player></div><div><loading-skeleton .expect="${this.meta?.name}" num="3"><div class="mb-2 flex items-center"><dui-link class="text-base" href="${`/collection/${this.cookedUri}`}">${this.meta?.name}<i class="mdi mdi-ethereum ml-1"></i></dui-link></div><p class="break-words break-all text-xs lg_text-sm text-gray-500">${this.meta?.description}</p></loading-skeleton></div></div><div class="text-xs">Minted on ${this.createTime}, Owned by ${j(this.item.doids?.length,(()=>x`${this.item.doids?.at(0)?.name}`),(()=>x`<dui-address .address="${this.item.owner}"></dui-address>`))}</div></div>`}};Ne([T()],Ae.prototype,"DOID",2),Ne([T()],Ae.prototype,"item",2),Ne([P()],Ae.prototype,"cooked",2),Ne([P()],Ae.prototype,"meta",2),Ae=Ne([O("doid-coll-item")],Ae);var qe=Object.defineProperty,Ee=Object.getOwnPropertyDescriptor,He=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?Ee(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&qe(t,i,a),a};let Qe=class extends(A(n(":host::part(inner){display:flex;height:2rem;width:100%;align-items:center;justify-content:center}@media (min-width: 1024px){:host::part(inner){height:2.5rem}}\n"),{persistent:!0,rootMargin:"30px"})){constructor(){super(...arguments),this.pageSize=5,this.page=1,this.mode="scroll",this.pending=!1,this.firstLoad=!0,this.empty=!1,this.nomore=!1,this.class="",this.onObserved=()=>{this.scrollMode&&this.loadmore()}}get canLoad(){return!(this.pending||this.nomore||this.empty||this.firstLoad)}get scrollMode(){return"scroll"===this.mode}loadmore(){if(!this.canLoad)return;const{pageSize:e,page:t,mode:i}=this;this.emit("loadmore",{pageSize:e,page:t,mode:i})}connectedCallback(){super.connectedCallback()}render(){return x`<div class="dui-pagination w-full flex justify-center items-center mt-4 ${D(this.$c([{nomore:this.nomore,"pointer-events-none":!this.canLoad},this.class]))}"><div part="inner" @click="${this.loadmore}">${j(this.empty,(()=>x`<slot name="empty"></slot>`),(()=>x`${j(this.nomore,(()=>x`<slot name="nomore"></slot>`),(()=>x`${j(this.pending,(()=>x`<slot name="loading"><loading-icon type="block"></loading-icon></slot>`),(()=>x`${j(!this.scrollMode&&!this.firstLoad,(()=>x`<slot><dui-link>Load more</dui-link></slot>`))}`))}`))}`))}</div></div>`}};He([T({type:Number})],Qe.prototype,"pageSize",2),He([T({type:Number})],Qe.prototype,"page",2),He([T()],Qe.prototype,"mode",2),He([T()],Qe.prototype,"pending",2),He([T({type:Boolean})],Qe.prototype,"firstLoad",2),He([T({type:Boolean})],Qe.prototype,"empty",2),He([T({type:Boolean})],Qe.prototype,"nomore",2),He([T()],Qe.prototype,"class",2),Qe=He([O("dui-pagination")],Qe);var We=Object.defineProperty,Ze=Object.getOwnPropertyDescriptor,Fe=(e,t,i,s)=>{for(var o,a=s>1?void 0:s?Ze(t,i):t,r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s?o(t,i,a):o(a))||a);return s&&a&&We(t,i,a),a};let Ge=class extends(n("")){constructor(){super(...arguments),this.pending=!1,this.err="",this.ts=0,this.collections=[],this.nomore=!1,this.page=1,this.pageSize=5,this.loadmore=()=>{this.page++,this.getCollections()}}get doid(){return this.DOID?.doid}get empty(){return!(this.err||!this.doid||!this.ts||this.collections.length)}get pagination(){return{page:this.page,pageSize:this.pageSize}}async getCollections(){if(this.pending)return;const{owner:e=""}=await k(this.doid);if(e){this.pending=!0,this.err="";try{const i=await t({minter:e,doid:this.doid},this.pagination);this.collections.push(...i),this.nomore=i.length<this.pageSize}catch(i){this.err=i.message||i}finally{this.ts++,this.pending=!1}}}connectedCallback(){super.connectedCallback(),this.getCollections()}render(){return x`<div class="doid-collections">${j(this.err,(()=>x`${this.err}`))} ${j(this.collections.length,(()=>x`<div class="grid gap-4">${C(this.collections,(e=>x`${M(e,x`<div class="bg-gray-100 break-words break-all rounded-md"><doid-coll-item .DOID="${this.DOID}" .item="${e}"></doid-coll-item></div>`)}`))}</div>`))} ${j(!this.err,(()=>x`<dui-pagination .pending="${this.pending}" .nomore="${this.nomore}" .firstLoad="${!this.ts}" .empty="${this.empty}" .pageSize="${this.pageSize}" .page="${this.page}" @loadmore="${this.loadmore}"><span slot="empty">No collection yet.</span></dui-pagination>`))}</div>`}};Fe([T()],Ge.prototype,"DOID",2),Fe([P()],Ge.prototype,"pending",2),Fe([P()],Ge.prototype,"err",2),Fe([P()],Ge.prototype,"ts",2),Fe([P()],Ge.prototype,"collections",2),Fe([P()],Ge.prototype,"nomore",2),Fe([P()],Ge.prototype,"page",2),Fe([P()],Ge.prototype,"pageSize",2),Ge=Fe([O("doid-collections")],Ge)}}}));
